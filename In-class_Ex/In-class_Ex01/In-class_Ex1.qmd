---
title: "In-class_Ex1"
editor: visual
---

# Getting Start

1.  Using `p_load()` of **pacman** package to load tidyverse on

```{r}
pacman::p_load(tidyverse)
```

2. Import data

show_col_types = FALSE can conceal the summary of the table

```{r}
exam_data<- read_csv('data/Exam_data.csv', show_col_types = FALSE)
```

# Working with theme

1. Theme_minimal can make the background white
2. theme(panel.background) can change background color
3. panel.grid.major vs panel.grid.minor

```{r}
ggplot(exam_data, aes(x=RACE))+
  geom_bar()+
  coord_flip()+
  theme_minimal()+
  theme(
    panel.background = element_rect(fill = "lightblue", colour='lightblue',size = 0.5, linetype = 'solid'),
    panel.grid.major = element_line(size = 0.5, linetype = 'solid', colour = "black"),
    panel.grid.minor = element_line(size = 0.25, linetype = 'solid', colour = "white"))
```

1. reorder: order in ascending order, so if we want to make it descending, we need to negate the variables first
2. ..count..:represents the count of observations for each group, which comes from stat='count'
3. vjust: adjust the position of the text.(1,0,-1)
4. theme(axis.title.y=element_text(angle = 0)): this makes y label horizontal

```{r}
ggplot(exam_data, aes(x=reorder(RACE, RACE, function(x) -length(x))))+
  geom_bar()+
  ylim(0,220)+
  geom_text(stat = 'count', 
            aes(label=paste0(..count..,',',round(..count../sum(..count..)*100,1),'%')), vjust=-1)+
  xlab('Race')+
  ylab('No. of\n Pupils')+
  theme(axis.title.y=element_text(angle = 0))
```

The same graph can also be generated by fct_infreq package. fct_infreq reorder RACE first.

```{r}
exam_data %>%
  mutate(RACE = fct_infreq(RACE)) %>%
  ggplot(aes(x = RACE)) + 
  geom_bar()+
  ylim(0,220) +
  geom_text(stat="count", 
      aes(label=paste0(..count.., ", ", 
      round(..count../sum(..count..)*100,
            1), "%")),
      vjust=-1) +
  xlab("Race") +
  ylab("No. of\nPupils") +
  theme(axis.title.y=element_text(angle = 0))
```

1. geom_vline: xintercept specifies the position of the line along the x-axis; size sets the line thickness to 1

```{r}
ggplot(data=exam_data,
       aes(x=MATHS))+
  geom_histogram(bins = 20,
                 color='black',
                 fill='light blue')+
  geom_vline(aes(xintercept=mean(MATHS, na.rm=T)),
             color='red',
             linetype='dashed',
             size=1)+
  geom_vline(aes(xintercept=median(MATHS, na.rm=T)),
             color="grey30",
             linetype="dashed", 
             size=1)
```


